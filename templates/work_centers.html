{% extends "layout.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Work Centers</h1>
    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addWcModal"><i class="bi bi-plus-circle"></i> Add Work Center</button>
</div>
<div class="card">
    <div class="card-body">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Location</th>
                    <th class="text-end">Cost per Hour</th>
                </tr>
            </thead>
            <tbody>
                {% for wc in work_centers %}
                <tr>
                    <td>{{ wc.id }}</td>
                    <td>{{ wc.name }}</td>
                    <td>{{ wc.location }}</td>
                    <td class="text-end">₹{{ "%.2f"|format(wc.hourly_cost) if wc.hourly_cost else 'N/A' }}</td>
                </tr>
                {% else %}
                <tr><td colspan="4" class="text-center">No work centers defined.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="modal fade" id="addWcModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Work Center</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <form action="{{ url_for('add_work_center') }}" method="post">
        <div class="modal-body">
          <div class="mb-3"><label class="form-label">Work Center ID (e.g., WC04)</label><input type="text" name="id" class="form-control" required></div>
          <div class="mb-3"><label class="form-label">Name</label><input type="text" name="name" class="form-control" required></div>
          <div class="mb-3"><label class="form-label">Location</label><input type="text" name="location" class="form-control" placeholder="e.g., Shop Floor, Bay 3" required></div>
          <div class="mb-3"><label class="form-label">Cost per Hour (₹)</label><input type="number" step="0.01" name="hourly_cost" class="form-control" required></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Save Work Center</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}